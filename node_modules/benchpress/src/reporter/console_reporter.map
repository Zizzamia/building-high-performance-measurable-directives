{"version":3,"sources":["console_reporter.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/25"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/benchpress/src/reporter/console_reporter.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/benchpress/src/reporter/","sourcesContent":["import { print, isPresent, isBlank, NumberWrapper } from 'angular2/src/facade/lang';\nimport { StringMapWrapper, ListWrapper, List } from 'angular2/src/facade/collection';\nimport { Promise, PromiseWrapper } from 'angular2/src/facade/async';\nimport { Math } from 'angular2/src/facade/math';\nimport { bind, OpaqueToken } from 'angular2/di';\n\nimport { Statistic } from '../statistic';\nimport { Reporter } from '../reporter';\nimport { SampleDescription } from '../sample_description';\nimport { MeasureValues } from '../measure_values';\n\n/**\n * A reporter for the console\n */\nexport class ConsoleReporter extends Reporter {\n  // TODO(tbosch): use static values when our transpiler supports them\n  static get PRINT() { return _PRINT; }\n  // TODO(tbosch): use static values when our transpiler supports them\n  static get COLUMN_WIDTH() { return _COLUMN_WIDTH; }\n  // TODO(tbosch): use static values when our transpiler supports them\n  static get BINDINGS() { return _BINDINGS; }\n\n  static _lpad(value, columnWidth, fill = ' ') {\n    var result = '';\n    for (var i=0; i<columnWidth - value.length; i++) {\n      result += fill;\n    }\n    return result + value;\n  }\n\n  static _formatNum(n) {\n    return NumberWrapper.toFixed(n, 2);\n  }\n\n  static _sortedProps(obj) {\n    var props = [];\n    StringMapWrapper.forEach(obj, (value, prop) => ListWrapper.push(props, prop));\n    props.sort();\n    return props;\n  }\n\n  _columnWidth:number;\n  _metricNames:List;\n  _print:Function;\n\n  constructor(columnWidth, sampleDescription, print) {\n    super();\n    this._columnWidth = columnWidth;\n    this._metricNames = ConsoleReporter._sortedProps(sampleDescription.metrics);\n    this._print = print;\n    this._printDescription(sampleDescription);\n  }\n\n  _printDescription(sampleDescription) {\n    this._print(`BENCHMARK ${sampleDescription.id}`);\n    this._print('Description:');\n    var props = ConsoleReporter._sortedProps(sampleDescription.description);\n    props.forEach( (prop) => {\n      this._print(`- ${prop}: ${sampleDescription.description[prop]}`);\n    });\n    this._print('Metrics:');\n    this._metricNames.forEach( (metricName) => {\n      this._print(`- ${metricName}: ${sampleDescription.metrics[metricName]}`);\n    });\n    this._print('');\n    this._printStringRow(this._metricNames);\n    this._printStringRow(this._metricNames.map( (_) => '' ), '-');\n  }\n\n  reportMeasureValues(measureValues:MeasureValues):Promise {\n    var formattedValues = ListWrapper.map(this._metricNames, (metricName) => {\n      var value = measureValues.values[metricName];\n      return ConsoleReporter._formatNum(value);\n    });\n    this._printStringRow(formattedValues);\n    return PromiseWrapper.resolve(null);\n  }\n\n  reportSample(completeSample:List<MeasureValues>, validSample:List<MeasureValues>):Promise {\n    this._printStringRow(this._metricNames.map( (_) => '' ), '=');\n    this._printStringRow(\n      ListWrapper.map(this._metricNames, (metricName) => {\n        var sample = ListWrapper.map(validSample, (measureValues) => measureValues.values[metricName]);\n        var mean = Statistic.calculateMean(sample);\n        var cv = Statistic.calculateCoefficientOfVariation(sample, mean);\n        var formattedCv = NumberWrapper.isNaN(cv) ? 'NaN' : Math.floor(cv);\n        return `${ConsoleReporter._formatNum(mean)}\\u00B1${formattedCv}%`;\n      })\n    );\n    return PromiseWrapper.resolve(null);\n  }\n\n  _printStringRow(parts, fill = ' ') {\n    this._print(\n      ListWrapper.map(parts, (part) => {\n        var w = this._columnWidth;\n        return ConsoleReporter._lpad(part, w, fill);\n      }).join(' | ')\n    );\n  }\n\n}\n\nvar _PRINT = new OpaqueToken('ConsoleReporter.print');\nvar _COLUMN_WIDTH = new OpaqueToken('ConsoleReporter.columnWidht');\nvar _BINDINGS = [\n  bind(ConsoleReporter).toFactory(\n    (columnWidth, sampleDescription, print) => new ConsoleReporter(columnWidth, sampleDescription, print),\n    [_COLUMN_WIDTH, SampleDescription, _PRINT]\n  ),\n  bind(_COLUMN_WIDTH).toValue(18),\n  bind(_PRINT).toValue(print)\n];\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.argumentTypes($__placeholder__0)","return assert.returnType(($__placeholder__0), $__placeholder__1)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.genericType($__placeholder__0)"]}