{"version":3,"sources":["keyvalue_changes.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/385","@traceur/generated/TemplateParser/2655","@traceur/generated/TemplateParser/8"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/change_detection/pipes/keyvalue_changes.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/angular2/src/change_detection/pipes/","sourcesContent":["import {ListWrapper, MapWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\n\nimport {stringify, looseIdentical, isJsObject} from 'angular2/src/facade/lang';\n\nexport class KeyValueChanges {\n  _records:Map;\n\n  _mapHead:KVChangeRecord;\n  _previousMapHead:KVChangeRecord;\n  _changesHead:KVChangeRecord;\n  _changesTail:KVChangeRecord;\n  _additionsHead:KVChangeRecord;\n  _additionsTail:KVChangeRecord;\n  _removalsHead:KVChangeRecord;\n  _removalsTail:KVChangeRecord;\n\n  constructor() {\n    this._records = MapWrapper.create();\n    this._mapHead = null;\n    this._previousMapHead = null;\n    this._changesHead = null;\n    this._changesTail = null;\n    this._additionsHead = null;\n    this._additionsTail = null;\n    this._removalsHead = null;\n    this._removalsTail = null;\n  }\n\n  static supports(obj):boolean {\n    return obj instanceof Map || isJsObject(obj);\n  }\n\n  supportsObj(obj):boolean {\n    return KeyValueChanges.supports(obj);\n  }\n\n  get isDirty():boolean {\n    return this._additionsHead !== null ||\n           this._changesHead !== null ||\n           this._removalsHead !== null;\n  }\n\n  forEachItem(fn:Function) {\n    var record:KVChangeRecord;\n    for (record = this._mapHead; record !== null; record = record._next) {\n      fn(record);\n    }\n  }\n\n  forEachPreviousItem(fn:Function) {\n    var record:KVChangeRecord;\n    for (record = this._previousMapHead; record !== null; record = record._nextPrevious) {\n      fn(record);\n    }\n  }\n\n  forEachChangedItem(fn:Function) {\n    var record:KVChangeRecord;\n    for (record = this._changesHead; record !== null; record = record._nextChanged) {\n      fn(record);\n    }\n  }\n\n  forEachAddedItem(fn:Function){\n    var record:KVChangeRecord;\n    for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n      fn(record);\n    }\n  }\n\n  forEachRemovedItem(fn:Function){\n    var record:KVChangeRecord;\n    for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n      fn(record);\n    }\n  }\n\n  check(map):boolean {\n    this._reset();\n    var records = this._records;\n    var oldSeqRecord:KVChangeRecord = this._mapHead;\n    var lastOldSeqRecord:KVChangeRecord = null;\n    var lastNewSeqRecord:KVChangeRecord = null;\n    var seqChanged:boolean = false;\n\n    this._forEach(map, (value, key) => {\n      var newSeqRecord;\n      if (oldSeqRecord !== null && key === oldSeqRecord.key) {\n        newSeqRecord = oldSeqRecord;\n        if (!looseIdentical(value, oldSeqRecord._currentValue)) {\n          oldSeqRecord._previousValue = oldSeqRecord._currentValue;\n          oldSeqRecord._currentValue = value;\n          this._addToChanges(oldSeqRecord);\n        }\n      } else {\n        seqChanged = true;\n        if (oldSeqRecord !== null) {\n          oldSeqRecord._next = null;\n          this._removeFromSeq(lastOldSeqRecord, oldSeqRecord);\n          this._addToRemovals(oldSeqRecord);\n        }\n        if (MapWrapper.contains(records, key)) {\n          newSeqRecord = MapWrapper.get(records, key);\n        } else {\n          newSeqRecord = new KVChangeRecord(key);\n          MapWrapper.set(records, key, newSeqRecord);\n          newSeqRecord._currentValue = value;\n          this._addToAdditions(newSeqRecord);\n        }\n      }\n\n      if (seqChanged) {\n        if (this._isInRemovals(newSeqRecord)) {\n          this._removeFromRemovals(newSeqRecord);\n        }\n        if (lastNewSeqRecord == null) {\n          this._mapHead = newSeqRecord;\n        } else {\n          lastNewSeqRecord._next = newSeqRecord;\n        }\n      }\n      lastOldSeqRecord = oldSeqRecord;\n      lastNewSeqRecord = newSeqRecord;\n      oldSeqRecord = oldSeqRecord === null ? null : oldSeqRecord._next;\n    });\n    this._truncate(lastOldSeqRecord, oldSeqRecord);\n    return this.isDirty;\n  }\n\n  _reset() {\n    if (this.isDirty) {\n      var record:KVChangeRecord;\n      // Record the state of the mapping\n      for (record = this._previousMapHead = this._mapHead;\n           record !== null;\n           record = record._next) {\n        record._nextPrevious = record._next;\n      }\n\n      for (record = this._changesHead; record !== null; record = record._nextChanged) {\n        record._previousValue = record._currentValue;\n      }\n\n      for (record = this._additionsHead; record != null; record = record._nextAdded) {\n        record._previousValue = record._currentValue;\n      }\n\n      // todo(vicb) once assert is supported\n      //assert(() {\n      //  var r = _changesHead;\n      //  while (r != null) {\n      //    var nextRecord = r._nextChanged;\n      //    r._nextChanged = null;\n      //    r = nextRecord;\n      //  }\n      //\n      //  r = _additionsHead;\n      //  while (r != null) {\n      //    var nextRecord = r._nextAdded;\n      //    r._nextAdded = null;\n      //    r = nextRecord;\n      //  }\n      //\n      //  r = _removalsHead;\n      //  while (r != null) {\n      //    var nextRecord = r._nextRemoved;\n      //    r._nextRemoved = null;\n      //    r = nextRecord;\n      //  }\n      //\n      //  return true;\n      //});\n      this._changesHead = this._changesTail = null;\n      this._additionsHead = this._additionsTail = null;\n      this._removalsHead = this._removalsTail = null;\n    }\n  }\n\n  _truncate(lastRecord:KVChangeRecord, record:KVChangeRecord) {\n    while (record !== null) {\n      if (lastRecord === null) {\n        this._mapHead = null;\n      } else {\n        lastRecord._next = null;\n      }\n      var nextRecord = record._next;\n      // todo(vicb) assert\n      //assert((() {\n      //  record._next = null;\n      //  return true;\n      //}));\n      this._addToRemovals(record);\n      lastRecord = record;\n      record = nextRecord;\n    }\n\n    for (var rec:KVChangeRecord = this._removalsHead; rec !== null; rec = rec._nextRemoved) {\n      rec._previousValue = rec._currentValue;\n      rec._currentValue = null;\n      MapWrapper.delete(this._records, rec.key);\n    }\n  }\n\n  _isInRemovals(record:KVChangeRecord) {\n    return record === this._removalsHead ||\n           record._nextRemoved !== null ||\n           record._prevRemoved !== null;\n  }\n\n  _addToRemovals(record:KVChangeRecord) {\n    // todo(vicb) assert\n    //assert(record._next == null);\n    //assert(record._nextAdded == null);\n    //assert(record._nextChanged == null);\n    //assert(record._nextRemoved == null);\n    //assert(record._prevRemoved == null);\n    if (this._removalsHead === null) {\n      this._removalsHead = this._removalsTail = record;\n    } else {\n      this._removalsTail._nextRemoved = record;\n      record._prevRemoved = this._removalsTail;\n      this._removalsTail = record;\n    }\n  }\n\n  _removeFromSeq(prev:KVChangeRecord, record:KVChangeRecord) {\n    var next = record._next;\n    if (prev === null) {\n      this._mapHead = next;\n    } else {\n      prev._next = next;\n    }\n    // todo(vicb) assert\n    //assert((() {\n    //  record._next = null;\n    //  return true;\n    //})());\n  }\n\n  _removeFromRemovals(record:KVChangeRecord) {\n    // todo(vicb) assert\n    //assert(record._next == null);\n    //assert(record._nextAdded == null);\n    //assert(record._nextChanged == null);\n\n    var prev = record._prevRemoved;\n    var next = record._nextRemoved;\n    if (prev === null) {\n      this._removalsHead = next;\n    } else {\n      prev._nextRemoved = next;\n    }\n    if (next === null) {\n      this._removalsTail = prev;\n    } else {\n      next._prevRemoved = prev;\n    }\n    record._prevRemoved = record._nextRemoved = null;\n  }\n\n  _addToAdditions(record:KVChangeRecord) {\n    // todo(vicb): assert\n    //assert(record._next == null);\n    //assert(record._nextAdded == null);\n    //assert(record._nextChanged == null);\n    //assert(record._nextRemoved == null);\n    //assert(record._prevRemoved == null);\n    if (this._additionsHead === null) {\n      this._additionsHead = this._additionsTail = record;\n    } else {\n      this._additionsTail._nextAdded = record;\n      this._additionsTail = record;\n    }\n  }\n\n  _addToChanges(record:KVChangeRecord) {\n    // todo(vicb) assert\n    //assert(record._nextAdded == null);\n    //assert(record._nextChanged == null);\n    //assert(record._nextRemoved == null);\n    //assert(record._prevRemoved == null);\n    if (this._changesHead === null) {\n      this._changesHead = this._changesTail = record;\n    } else {\n      this._changesTail._nextChanged = record;\n      this._changesTail = record;\n    }\n  }\n\n  toString():string {\n    var items = [];\n    var previous = [];\n    var changes = [];\n    var additions = [];\n    var removals = [];\n    var record:KVChangeRecord;\n\n    for (record = this._mapHead; record !== null; record = record._next) {\n      ListWrapper.push(items, stringify(record));\n    }\n    for (record = this._previousMapHead; record !== null; record = record._nextPrevious) {\n      ListWrapper.push(previous, stringify(record));\n    }\n    for (record = this._changesHead; record !== null; record = record._nextChanged) {\n      ListWrapper.push(changes, stringify(record));\n    }\n    for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n      ListWrapper.push(additions, stringify(record));\n    }\n    for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n      ListWrapper.push(removals, stringify(record));\n    }\n\n    return \"map: \" + items.join(', ') + \"\\n\" +\n           \"previous: \" + previous.join(', ') + \"\\n\" +\n           \"additions: \" + additions.join(', ') + \"\\n\" +\n           \"changes: \" + changes.join(', ') + \"\\n\" +\n           \"removals: \" + removals.join(', ') + \"\\n\";\n  }\n\n  _forEach(obj, fn:Function) {\n    if (obj instanceof Map) {\n      MapWrapper.forEach(obj, fn);\n    } else {\n      StringMapWrapper.forEach(obj, fn);\n    }\n  }\n}\n\n\n\nexport class KVChangeRecord {\n  key;\n  _previousValue;\n  _currentValue;\n\n  _nextPrevious:KVChangeRecord;\n  _next:KVChangeRecord;\n  _nextAdded:KVChangeRecord;\n  _nextRemoved:KVChangeRecord;\n  _prevRemoved:KVChangeRecord;\n  _nextChanged:KVChangeRecord;\n\n  constructor(key) {\n    this.key = key;\n    this._previousValue = null;\n    this._currentValue = null;\n\n    this._nextPrevious = null;\n    this._next = null;\n    this._nextAdded = null;\n    this._nextRemoved = null;\n    this._prevRemoved = null;\n    this._nextChanged = null;\n  }\n\n  toString():string {\n    return looseIdentical(this._previousValue, this._currentValue) ?\n      stringify(this.key) :\n      (stringify(this.key) + '[' + stringify(this._previousValue) + '->' +\n        stringify(this._currentValue) + ']');\n  }\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.type.$__placeholder__0)","assert.argumentTypes($__placeholder__0)","assert.type($__placeholder__0, $__placeholder__1)","assert.type.any","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}