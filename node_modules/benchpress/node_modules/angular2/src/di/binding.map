{"version":3,"sources":["binding.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/di/binding.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/angular2/src/di/","sourcesContent":["import {FIELD, Type, isBlank, isPresent} from 'angular2/src/facade/lang';\nimport {List, MapWrapper, ListWrapper} from 'angular2/src/facade/collection';\nimport {reflector} from 'angular2/src/reflection/reflection';\nimport {Key} from './key';\nimport {Inject, InjectLazy, InjectPromise, DependencyAnnotation} from './annotations';\nimport {NoAnnotationError} from './exceptions';\n\nexport class Dependency {\n  key:Key;\n  asPromise:boolean;\n  lazy:boolean;\n  properties:List;\n  constructor(key:Key, asPromise:boolean, lazy:boolean, properties:List) {\n    this.key = key;\n    this.asPromise = asPromise;\n    this.lazy = lazy;\n    this.properties = properties;\n  }\n}\n\nexport class Binding {\n  key:Key;\n  factory:Function;\n  dependencies:List;\n  providedAsPromise:boolean;\n\n  constructor(key:Key, factory:Function, dependencies:List, providedAsPromise:boolean) {\n    this.key = key;\n    this.factory = factory;\n    this.dependencies = dependencies;\n    this.providedAsPromise = providedAsPromise;\n  }\n}\n\nexport function bind(token):BindingBuilder {\n  return new BindingBuilder(token);\n}\n\nexport class BindingBuilder {\n  token;\n  constructor(token) {\n    this.token = token;\n  }\n\n  toClass(type:Type):Binding {\n    return new Binding(\n      Key.get(this.token),\n      reflector.factory(type),\n      _dependenciesFor(type),\n      false\n    );\n  }\n\n  toValue(value):Binding {\n    return new Binding(\n      Key.get(this.token),\n      () => value,\n      [],\n      false\n    );\n  }\n\n  toAlias(aliasToken):Binding {\n    return new Binding(\n      Key.get(this.token),\n      (aliasInstance) => aliasInstance,\n      [new Dependency(Key.get(aliasToken), false, false, [])],\n      false\n    );\n  }\n\n  toFactory(factoryFunction:Function, dependencies:List = null):Binding {\n    return new Binding(\n      Key.get(this.token),\n      factoryFunction,\n      this._constructDependencies(factoryFunction, dependencies),\n      false\n    );\n  }\n\n  toAsyncFactory(factoryFunction:Function, dependencies:List = null):Binding {\n    return new Binding(\n      Key.get(this.token),\n      factoryFunction,\n      this._constructDependencies(factoryFunction, dependencies),\n      true\n    );\n  }\n\n  _constructDependencies(factoryFunction:Function, dependencies:List) {\n    return isBlank(dependencies) ?\n      _dependenciesFor(factoryFunction) :\n      ListWrapper.map(dependencies, (t) => new Dependency(Key.get(t), false, false, []));\n  }\n}\n\nfunction _dependenciesFor(typeOrFunc):List {\n  var params = reflector.parameters(typeOrFunc);\n  if (isBlank(params)) return [];\n  if (ListWrapper.any(params, (p) => isBlank(p))) throw new NoAnnotationError(typeOrFunc);\n  return ListWrapper.map(params, (p) => _extractToken(typeOrFunc, p));\n}\n\nfunction _extractToken(typeOrFunc, annotations) {\n  var type;\n  var depProps = [];\n\n  for (var i = 0; i < annotations.length; ++i) {\n    var paramAnnotation = annotations[i];\n\n    if (paramAnnotation instanceof Type) {\n      type = paramAnnotation;\n\n    } else if (paramAnnotation instanceof Inject) {\n      return _createDependency(paramAnnotation.token, false, false, []);\n\n    } else if (paramAnnotation instanceof InjectPromise) {\n      return _createDependency(paramAnnotation.token, true, false, []);\n\n    } else if (paramAnnotation instanceof InjectLazy) {\n      return _createDependency(paramAnnotation.token, false, true, []);\n\n    } else if (paramAnnotation instanceof DependencyAnnotation) {\n      ListWrapper.push(depProps, paramAnnotation);\n    }\n  }\n\n  if (isPresent(type)) {\n    return _createDependency(type, false, false, depProps);\n  } else {\n    throw new NoAnnotationError(typeOrFunc);\n  }\n}\n\nfunction _createDependency(token, asPromise, lazy, depProps):Dependency {\n  return new Dependency(Key.get(token), asPromise, lazy, depProps);\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","return assert.returnType(($__placeholder__0), $__placeholder__1)"]}