{"version":3,"sources":["injector.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/866","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/858","@traceur/generated/TemplateParser/862"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/di/injector.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/angular2/src/di/","sourcesContent":["import {Map, List, MapWrapper, ListWrapper} from 'angular2/src/facade/collection';\nimport {Binding, BindingBuilder, bind} from './binding';\nimport {ProviderError, NoProviderError, InvalidBindingError,\n  AsyncBindingError, CyclicDependencyError, InstantiationError} from './exceptions';\nimport {FunctionWrapper, Type, isPresent, isBlank} from 'angular2/src/facade/lang';\nimport {Promise, PromiseWrapper} from 'angular2/src/facade/async';\nimport {Key} from './key';\n\nvar _constructing = new Object();\n\nclass _Waiting {\n  promise:Promise;\n  constructor(promise:Promise) {\n    this.promise = promise;\n  }\n}\nfunction _isWaiting(obj):boolean {\n  return obj instanceof _Waiting;\n}\n\n\nexport class Injector {\n  _bindings:List;\n  _instances:List;\n  _parent:Injector;\n  _defaultBindings:boolean;\n  _asyncStrategy: _AsyncInjectorStrategy;\n  _syncStrategy:_SyncInjectorStrategy;\n  constructor(bindings:List, {parent=null, defaultBindings=false}={}) {\n    var flatten = _flattenBindings(bindings, MapWrapper.create());\n    this._bindings = this._createListOfBindings(flatten);\n    this._instances = this._createInstances();\n    this._parent = parent;\n    this._defaultBindings = defaultBindings;\n\n    this._asyncStrategy = new _AsyncInjectorStrategy(this);\n    this._syncStrategy = new _SyncInjectorStrategy(this);\n  }\n\n  get(token) {\n    return this._getByKey(Key.get(token), false, false);\n  }\n\n  asyncGet(token) {\n    return this._getByKey(Key.get(token), true, false);\n  }\n\n  createChild(bindings:List):Injector {\n    return new Injector(bindings, {parent: this});\n  }\n\n\n  _createListOfBindings(flattenBindings):List {\n    var bindings = ListWrapper.createFixedSize(Key.numberOfKeys + 1);\n    MapWrapper.forEach(flattenBindings, (v, keyId) => bindings[keyId] = v);\n    return bindings;\n  }\n\n  _createInstances():List {\n    return ListWrapper.createFixedSize(Key.numberOfKeys + 1);\n  }\n\n  _getByKey(key:Key, returnPromise:boolean, returnLazy:boolean) {\n    if (returnLazy) {\n      return () => this._getByKey(key, returnPromise, false);\n    }\n\n    var strategy = returnPromise ? this._asyncStrategy : this._syncStrategy;\n\n    var instance = strategy.readFromCache(key);\n    if (isPresent(instance)) return instance;\n\n    instance = strategy.instantiate(key);\n    if (isPresent(instance)) return instance;\n\n    if (isPresent(this._parent)) {\n      return this._parent._getByKey(key, returnPromise, returnLazy);\n    }\n    throw new NoProviderError(key);\n  }\n\n  _resolveDependencies(key:Key, binding:Binding, forceAsync:boolean):List {\n    try {\n      var getDependency = d => this._getByKey(d.key, forceAsync || d.asPromise, d.lazy);\n      return ListWrapper.map(binding.dependencies, getDependency);\n    } catch (e) {\n      this._clear(key);\n      if (e instanceof ProviderError) e.addKey(key);\n      throw e;\n    }\n  }\n\n  _getInstance(key:Key) {\n    if (this._instances.length <= key.id) return null;\n    return ListWrapper.get(this._instances, key.id);\n  }\n\n  _setInstance(key:Key, obj) {\n    ListWrapper.set(this._instances, key.id, obj);\n  }\n\n  _getBinding(key:Key) {\n    var binding = this._bindings.length <= key.id ?\n      null :\n      ListWrapper.get(this._bindings, key.id);\n\n    if (isBlank(binding) && this._defaultBindings) {\n      return bind(key.token).toClass(key.token);\n    } else {\n      return binding;\n    }\n  }\n\n  _markAsConstructing(key:Key) {\n    this._setInstance(key, _constructing);\n  }\n\n  _clear(key:Key) {\n    this._setInstance(key, null);\n  }\n}\n\n\nclass _SyncInjectorStrategy {\n  injector:Injector;\n  constructor(injector:Injector) {\n    this.injector = injector;\n  }\n\n  readFromCache(key:Key) {\n    if (key.token === Injector) {\n      return this.injector;\n    }\n\n    var instance = this.injector._getInstance(key);\n\n    if (instance === _constructing) {\n      throw new CyclicDependencyError(key);\n    } else if (isPresent(instance) && !_isWaiting(instance)) {\n      return instance;\n    } else {\n      return null;\n    }\n  }\n\n  instantiate(key:Key) {\n    var binding = this.injector._getBinding(key);\n    if (isBlank(binding)) return null;\n\n    if (binding.providedAsPromise) throw new AsyncBindingError(key);\n\n    //add a marker so we can detect cyclic dependencies\n    this.injector._markAsConstructing(key);\n\n    var deps = this.injector._resolveDependencies(key, binding, false);\n    return this._createInstance(key, binding, deps);\n  }\n\n  _createInstance(key:Key, binding:Binding, deps:List) {\n    try {\n      var instance = FunctionWrapper.apply(binding.factory, deps);\n      this.injector._setInstance(key, instance);\n      return instance;\n    } catch (e) {\n      this.injector._clear(key);\n      throw new InstantiationError(e, key);\n    }\n  }\n}\n\n\nclass _AsyncInjectorStrategy {\n  injector:Injector;\n  constructor(injector:Injector) {\n    this.injector = injector;\n  }\n\n  readFromCache(key:Key) {\n    if (key.token === Injector) {\n      return PromiseWrapper.resolve(this.injector);\n    }\n\n    var instance = this.injector._getInstance(key);\n\n    if (instance === _constructing) {\n      throw new CyclicDependencyError(key);\n    } else if (_isWaiting(instance)) {\n      return instance.promise;\n    } else if (isPresent(instance)) {\n      return PromiseWrapper.resolve(instance);\n    } else {\n      return null;\n    }\n  }\n\n  instantiate(key:Key) {\n    var binding = this.injector._getBinding(key);\n    if (isBlank(binding)) return null;\n\n    //add a marker so we can detect cyclic dependencies\n    this.injector._markAsConstructing(key);\n\n    var deps = this.injector._resolveDependencies(key, binding, true);\n    var depsPromise = PromiseWrapper.all(deps);\n\n    var promise = PromiseWrapper\n      .then(depsPromise, null, (e) => this._errorHandler(key, e))\n      .then(deps => this._findOrCreate(key, binding, deps))\n      .then(instance => this._cacheInstance(key, instance));\n\n    this.injector._setInstance(key, new _Waiting(promise));\n    return promise;\n  }\n\n  _errorHandler(key:Key, e):Promise {\n    if (e instanceof ProviderError) e.addKey(key);\n    return PromiseWrapper.reject(e);\n  }\n\n  _findOrCreate(key:Key, binding:Binding, deps:List) {\n    try {\n      var instance = this.injector._getInstance(key);\n      if (!_isWaiting(instance)) return instance;\n      return FunctionWrapper.apply(binding.factory, deps);\n    } catch (e) {\n      this.injector._clear(key);\n      throw new InstantiationError(e, key);\n    }\n  }\n\n  _cacheInstance(key, instance) {\n    this.injector._setInstance(key, instance);\n    return instance\n  }\n}\n\n\nfunction _flattenBindings(bindings:List, res:Map) {\n  ListWrapper.forEach(bindings, function (b) {\n    if (b instanceof Binding) {\n      MapWrapper.set(res, b.key.id, b);\n\n    } else if (b instanceof Type) {\n      var s = bind(b).toClass(b);\n      MapWrapper.set(res, s.key.id, s);\n\n    } else if (b instanceof List) {\n      _flattenBindings(b, res);\n\n    } else if (b instanceof BindingBuilder) {\n      throw new InvalidBindingError(b.token);\n\n    } else {\n      throw new InvalidBindingError(b);\n    }\n  });\n  return res;\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","assert.argumentTypes($__placeholder__0)","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.type.$__placeholder__0)","($__placeholder__0 = $__placeholder__1.$__placeholder__2) === void 0 ?\n        $__placeholder__3 : $__placeholder__4","var $__placeholder__0 = $__placeholder__1","assert.type.any","assert.type.any"]}