{"version":3,"sources":["shim_shadow_css.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/8"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/core/compiler/pipeline/shim_shadow_css.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/angular2/src/core/compiler/pipeline/","sourcesContent":["import {CompileStep} from './compile_step';\nimport {CompileElement} from './compile_element';\nimport {CompileControl} from './compile_control';\n\nimport {DirectiveMetadata} from 'angular2/src/core/compiler/directive_metadata';\nimport {ShadowDomStrategy} from 'angular2/src/core/compiler/shadow_dom_strategy';\n\nimport {DOM, Element} from 'angular2/src/facade/dom';\nimport {isPresent, isBlank, Type} from 'angular2/src/facade/lang';\n\nexport class ShimShadowCss extends CompileStep {\n  _strategy: ShadowDomStrategy;\n  _styleHost: Element;\n  _lastInsertedStyle: Element;\n  _component: Type;\n\n  constructor(cmpMetadata: DirectiveMetadata, strategy: ShadowDomStrategy, styleHost: Element) {\n    super();\n    this._strategy = strategy;\n    this._component = cmpMetadata.type;\n    this._styleHost = styleHost;\n    this._lastInsertedStyle = null;\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    // May be remove the styles\n    if (DOM.tagName(current.element) == 'STYLE') {\n      current.ignoreBindings = true;\n      if (this._strategy.extractStyles()) {\n        DOM.remove(current.element);\n        var css = DOM.getText(current.element);\n        var shimComponent = this._strategy.getShimComponent(this._component);\n        css = shimComponent.shimCssText(css);\n        this._insertStyle(this._styleHost, css);\n      }\n    }\n  }\n\n  _insertStyle(el: Element, css: string) {\n    var style = DOM.createStyleElement(css);\n    if (isBlank(this._lastInsertedStyle)) {\n      var firstChild = DOM.firstChild(el);\n      if (isPresent(firstChild)) {\n        DOM.insertBefore(firstChild, style);\n      } else {\n        DOM.appendChild(el, style);\n      }\n    } else {\n      DOM.insertAfter(this._lastInsertedStyle, style);\n    }\n    this._lastInsertedStyle = style;\n  }\n}\n\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","assert.argumentTypes($__placeholder__0)","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.type.$__placeholder__0)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}