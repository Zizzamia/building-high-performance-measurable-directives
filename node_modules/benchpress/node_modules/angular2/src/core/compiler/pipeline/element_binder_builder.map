{"version":3,"sources":["element_binder_builder.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/3232","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/3233","@traceur/generated/TemplateParser/3234","@traceur/generated/TemplateParser/3235","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/25"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/core/compiler/pipeline/element_binder_builder.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/angular2/src/core/compiler/pipeline/","sourcesContent":["import {int, isPresent, isBlank, Type, BaseException, StringWrapper, RegExpWrapper, isString, stringify} from 'angular2/src/facade/lang';\nimport {Element, DOM} from 'angular2/src/facade/dom';\nimport {ListWrapper, List, MapWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\n\nimport {reflector} from 'angular2/src/reflection/reflection';\n\nimport {Parser, ProtoChangeDetector} from 'angular2/change_detection';\n\nimport {DirectiveMetadata} from '../directive_metadata';\n\nimport {CompileStep} from './compile_step';\nimport {CompileElement} from './compile_element';\nimport {CompileControl} from './compile_control';\n\nvar DOT_REGEXP = RegExpWrapper.create('\\\\.');\n\nconst ARIA_PREFIX = 'aria-';\nvar ariaSettersCache = StringMapWrapper.create();\n\nfunction ariaSetterFactory(attrName:string) {\n  var setterFn = StringMapWrapper.get(ariaSettersCache, attrName);\n\n  if (isBlank(setterFn)) {\n    setterFn = function(element:Element, value) {\n      if (isPresent(value)) {\n        DOM.setAttribute(element, attrName, stringify(value));\n      } else {\n        DOM.removeAttribute(element, attrName);\n      }\n    };\n    StringMapWrapper.set(ariaSettersCache, attrName, setterFn);\n  }\n\n  return setterFn;\n}\n\nconst CLASS_PREFIX = 'class.';\nvar classSettersCache = StringMapWrapper.create();\n\nfunction classSetterFactory(className:string) {\n  var setterFn = StringMapWrapper.get(classSettersCache, className);\n\n  if (isBlank(setterFn)) {\n    setterFn = function(element:Element, value) {\n      if (value) {\n        DOM.addClass(element, className);\n      } else {\n        DOM.removeClass(element, className);\n      }\n    };\n    StringMapWrapper.set(classSettersCache, className, setterFn);\n  }\n\n  return setterFn;\n}\n\nconst STYLE_PREFIX = 'style.';\nvar styleSettersCache = StringMapWrapper.create();\n\nfunction styleSetterFactory(styleName:string, stylesuffix:string) {\n  var cacheKey = styleName + stylesuffix;\n  var setterFn = StringMapWrapper.get(styleSettersCache, cacheKey);\n\n  if (isBlank(setterFn)) {\n    setterFn = function(element:Element, value) {\n      var valAsStr;\n      if (isPresent(value)) {\n        valAsStr = stringify(value);\n        DOM.setStyle(element, styleName, valAsStr + stylesuffix);\n      } else {\n        DOM.removeStyle(element, styleName);\n      }\n    };\n    StringMapWrapper.set(classSettersCache, cacheKey, setterFn);\n  }\n\n  return setterFn;\n}\n\nconst ROLE_ATTR = 'role';\nfunction roleSetter(element:Element, value) {\n  if (isString(value)) {\n    DOM.setAttribute(element, ROLE_ATTR, value);\n  } else {\n    DOM.removeAttribute(element, ROLE_ATTR);\n    if (isPresent(value)) {\n      throw new BaseException(\"Invalid role attribute, only string values are allowed, got '\" + stringify(value) + \"'\");\n    }\n  }\n}\n\n/**\n * Creates the ElementBinders and adds watches to the\n * ProtoChangeDetector.\n *\n * Fills:\n * - CompileElement#inheritedElementBinder\n *\n * Reads:\n * - (in parent) CompileElement#inheritedElementBinder\n * - CompileElement#hasBindings\n * - CompileElement#inheritedProtoView\n * - CompileElement#inheritedProtoElementInjector\n * - CompileElement#textNodeBindings\n * - CompileElement#propertyBindings\n * - CompileElement#eventBindings\n * - CompileElement#decoratorDirectives\n * - CompileElement#componentDirective\n * - CompileElement#viewportDirective\n *\n * Note: This actually only needs the CompileElements with the flags\n * `hasBindings` and `isViewRoot`,\n * and only needs the actual HTMLElement for the ones\n * with the flag `isViewRoot`.\n */\nexport class ElementBinderBuilder extends CompileStep {\n  _parser:Parser;\n  _compilationUnit:any;\n  constructor(parser:Parser, compilationUnit:any) {\n    super();\n    this._parser = parser;\n    this._compilationUnit = compilationUnit;\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    var elementBinder = null;\n    if (current.hasBindings) {\n      var protoView = current.inheritedProtoView;\n      var protoInjectorWasBuilt = isBlank(parent) ? true :\n          current.inheritedProtoElementInjector !== parent.inheritedProtoElementInjector;\n\n      var currentProtoElementInjector = protoInjectorWasBuilt ?\n          current.inheritedProtoElementInjector : null;\n\n      elementBinder = protoView.bindElement(currentProtoElementInjector,\n        current.componentDirective, current.viewportDirective);\n\n      if (isPresent(current.textNodeBindings)) {\n        this._bindTextNodes(protoView, current);\n      }\n      if (isPresent(current.propertyBindings)) {\n        this._bindElementProperties(protoView, current);\n      }\n      if (isPresent(current.eventBindings)) {\n        this._bindEvents(protoView, current);\n      }\n      this._bindDirectiveProperties(current.getAllDirectives(), current);\n    } else if (isPresent(parent)) {\n      elementBinder = parent.inheritedElementBinder;\n    }\n    current.inheritedElementBinder = elementBinder;\n  }\n\n  _bindTextNodes(protoView, compileElement) {\n    MapWrapper.forEach(compileElement.textNodeBindings, (expression, indexInParent) => {\n      protoView.bindTextNode(indexInParent, expression);\n    });\n  }\n\n  _bindElementProperties(protoView, compileElement) {\n    MapWrapper.forEach(compileElement.propertyBindings, (expression, property) => {\n      var setterFn, styleParts, styleSuffix;\n\n      if (StringWrapper.startsWith(property, ARIA_PREFIX)) {\n        setterFn = ariaSetterFactory(property);\n      } else if (StringWrapper.equals(property, ROLE_ATTR)) {\n        setterFn = roleSetter;\n      } else if (StringWrapper.startsWith(property, CLASS_PREFIX)) {\n        setterFn = classSetterFactory(StringWrapper.substring(property, CLASS_PREFIX.length));\n      } else if (StringWrapper.startsWith(property, STYLE_PREFIX)) {\n        styleParts = StringWrapper.split(property, DOT_REGEXP);\n        styleSuffix = styleParts.length > 2 ?  ListWrapper.get(styleParts, 2) : '';\n        setterFn = styleSetterFactory(ListWrapper.get(styleParts, 1), styleSuffix);\n      } else if (DOM.hasProperty(compileElement.element, property)) {\n        setterFn = reflector.setter(property);\n      }\n\n      if (isPresent(setterFn)) {\n        protoView.bindElementProperty(expression.ast, property, setterFn);\n      }\n    });\n  }\n\n  _bindEvents(protoView, compileElement) {\n    MapWrapper.forEach(compileElement.eventBindings, (expression, eventName) => {\n      protoView.bindEvent(eventName,  expression);\n    });\n  }\n\n  _bindDirectiveProperties(directives: List<DirectiveMetadata>,\n                           compileElement: CompileElement) {\n    var protoView = compileElement.inheritedProtoView;\n\n    for (var directiveIndex = 0; directiveIndex < directives.length; directiveIndex++) {\n      var directive = ListWrapper.get(directives, directiveIndex);\n      var annotation = directive.annotation;\n      if (isBlank(annotation.bind)) continue;\n      StringMapWrapper.forEach(annotation.bind, (bindConfig, dirProp) => {\n        var bindConfigParts = this._splitBindConfig(bindConfig);\n        var elProp = bindConfigParts[0];\n        var pipes = ListWrapper.slice(bindConfigParts, 1, bindConfigParts.length);\n\n        var bindingAst = isPresent(compileElement.propertyBindings) ?\n          MapWrapper.get(compileElement.propertyBindings, elProp) :\n            null;\n\n        if (isBlank(bindingAst)) {\n          var attributeValue = MapWrapper.get(compileElement.attrs(), elProp);\n          if (isPresent(attributeValue)) {\n            bindingAst = this._parser.wrapLiteralPrimitive(attributeValue, this._compilationUnit);\n          }\n        }\n\n        // Bindings are optional, so this binding only needs to be set up if an expression is given.\n        if (isPresent(bindingAst)) {\n          var fullExpAstWithBindPipes = this._parser.addPipes(bindingAst, pipes);\n          protoView.bindDirectiveProperty(\n            directiveIndex,\n            fullExpAstWithBindPipes,\n            dirProp,\n            reflector.setter(dirProp)\n          );\n        }\n      });\n    }\n  }\n\n  _splitBindConfig(bindConfig:string) {\n    var parts = StringWrapper.split(bindConfig, RegExpWrapper.create(\"\\\\|\"));\n    return ListWrapper.map(parts, (s) => s.trim());\n  }\n}","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","assert.type.any","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.type.any","assert.type.any","assert.type.any","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.genericType($__placeholder__0)"]}